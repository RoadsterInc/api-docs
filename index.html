
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;ruby&quot;,&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#token-based-api-endpoints" class="toc-h2 toc-link" data-title="Token-based API endpoints">Token-based API endpoints</a>
                  </li>
                  <li>
                    <a href="#browser-based-data-passing" class="toc-h2 toc-link" data-title="Browser-based data passing">Browser-based data passing</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#create-customer" class="toc-h1 toc-link" data-title="Create Customer">Create Customer</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#post-request" class="toc-h2 toc-link" data-title="POST Request">POST Request</a>
                  </li>
                  <li>
                    <a href="#expected-response" class="toc-h2 toc-link" data-title="Expected response">Expected response</a>
                  </li>
                  <li>
                    <a href="#browser-based-customer-submission" class="toc-h2 toc-link" data-title="Browser-based customer submission">Browser-based customer submission</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://roadster.com/contact'>Contact us for your developer key</a></li>
            <li><a href='https://roadster.com'>Become a Roadster Dealer</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Access to Roadster APIs is limited to current dealer, manufacturer or data partners. We support a limited set of endpoints that allow our partners to access certain features of the Roadster platform for use externally or to pass us data required to better integrate our systems into the dealer&#39;s software ecosystem.</p>

<p>This initial API documentation has been produced to help introduce our partners to our data and experience endpoints. For additional quesitons, please contact our support teams at <a href="mailto:dealersupport@roadster.com">dealersupport@roadster.com</a></p>

<aside class="notice">
All requests should be made using HTTPS.
</aside>
<h1 id='authentication'>Authentication</h1><h2 id='token-based-api-endpoints'>Token-based API endpoints</h2>
<blockquote>
<p>Examples of using the key-based API authorization.</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">req</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'https://express-dealer-site/api'</span><span class="p">)</span>
<span class="n">req</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'your_api_key'</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"https://express-dealer-site/api"</span>
  -H <span class="s2">"Authorization: your_api_key"</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>your_api_key</code> with your API key and <code>express-dealer-site</code> with the hostname of the Express Store for the dealership you are attempting to access.</p>
</blockquote>

<p>Authentication method depends on the endpoint being used. In general, you should have been provided an API key that you will use in the header of each of your calls. For applications that will be passing us customer records as part of the user interface, you will instead encrypt the data to AES-256-CBC standards using a cipher key provided by Roadster.</p>

<p><code>Authorization: your_api_key</code></p>

<aside class="notice">
You must replace <code>your_api_key</code> with your personal API key.
</aside>
<h2 id='browser-based-data-passing'>Browser-based data passing</h2>
<blockquote>
<p>Examples of using a public encryption key</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'base64'</span>

<span class="n">key</span> <span class="o">=</span> <span class="no">Base64</span><span class="p">.</span><span class="nf">decode64</span><span class="p">(</span><span class="s2">"your_encryption_key"</span><span class="p">)</span>
<span class="n">key</span> <span class="o">=</span> <span class="no">Digest</span><span class="o">::</span><span class="no">SHA256</span><span class="p">.</span><span class="nf">digest</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">if</span><span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="nf">kind_of?</span><span class="p">(</span><span class="no">String</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="mi">32</span> <span class="o">!=</span> <span class="n">key</span><span class="p">.</span><span class="nf">bytesize</span><span class="p">)</span>
<span class="n">aes</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Cipher</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'AES-256-CBC'</span><span class="p">)</span>
<span class="n">aes</span><span class="p">.</span><span class="nf">encrypt</span>
<span class="n">aes</span><span class="p">.</span><span class="nf">key</span> <span class="o">=</span> <span class="n">key</span>
<span class="n">iv</span> <span class="o">=</span> <span class="n">aes</span><span class="p">.</span><span class="nf">random_iv</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># With shell you can use OpenSSL to encrypt and decrypt data</span>

<span class="nb">echo </span>data | openssl aes-256-cbc -a -salt
enter aes-256-cbc encryption password: your_encryption_key
Verifying - enter aes-256-cbc encryption password: your_encryption_key
</code></pre>
<blockquote>
<p>Make sure to replace <code>your_encryption_key</code> with your API key and the base URL with the URL of the dealership you are attempting to access.</p>
</blockquote>

<p>Passing data to Roadster via the browser is possible using encrypted query parameters. Encryption to AES-256-CBC standards is required using an encryption key provided to you by Roadster. All parameters should be encrypted before passing them via the URL query string.</p>

<aside class="notice">
You must replace <code>your_encryption_key</code> with your personal encryption key.
</aside>
<h1 id='create-customer'>Create Customer</h1><h2 id='post-request'>POST Request</h2>
<blockquote>
<p>Example request for creating a customer with a dealer and VIN</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="n">req</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'https://api.roadster.com/v1/customers'</span><span class="p">)</span>
<span class="n">req</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'your_api_key'</span>
<span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">customer: </span><span class="p">{</span>
    <span class="ss">first_name: </span><span class="s2">"Steve"</span><span class="p">,</span>
    <span class="ss">last_name: </span><span class="s2">"McQueen"</span><span class="p">,</span>
    <span class="ss">email: </span><span class="s2">"steve.mcqueen@roadster.com"</span><span class="p">,</span>
    <span class="ss">phone: </span><span class="s2">"+14155556666"</span><span class="p">,</span>
    <span class="ss">partner_id: </span><span class="s2">"238612817"</span>
  <span class="p">},</span>
  <span class="ss">vehicle: </span><span class="p">{</span>
    <span class="ss">vin: </span><span class="s2">"3TMKU72N16M008970"</span><span class="p">,</span>
    <span class="ss">make: </span><span class="s2">"Ford"</span><span class="p">,</span>
    <span class="ss">model: </span><span class="s2">"Mustang"</span><span class="p">,</span>
    <span class="ss">year: </span><span class="s2">"1968"</span>
  <span class="p">},</span>
  <span class="ss">dealer: </span><span class="p">{</span>
    <span class="ss">partner_id: </span><span class="s2">"12345"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.roadster.com/v1/customers'</span> -XPOST -d @api-post.json -H <span class="s1">'Authorization: Token your_api_key'</span> -H <span class="s1">'Content-type: application/json'</span> -i

--@api-post.json
<span class="o">{</span>
  <span class="s2">"customer"</span>: <span class="o">{</span>
    <span class="s2">"first_name"</span>: <span class="s2">"Ralph"</span>,
    <span class="s2">"last_name"</span>: <span class="s2">"Dorfin"</span>,
    <span class="s2">"email"</span>: <span class="s2">"ralf4@testing.zz"</span>,
    <span class="s2">"phone"</span>: <span class="s2">"800-555-1234"</span>,
    <span class="s2">"partner_id"</span>: <span class="s2">"1359"</span>
  <span class="o">}</span>,
  <span class="s2">"vehicle"</span>: <span class="o">{</span>
    <span class="s2">"vin"</span>: <span class="s2">"JM1NDAM77K0306400"</span>,
    <span class="s2">"make"</span>: <span class="s2">"Mazda"</span>,
    <span class="s2">"model"</span>: <span class="s2">"MX-5 Miata"</span>,
    <span class="s2">"year"</span>: <span class="s2">"2019"</span>
  <span class="o">}</span>,
  <span class="s2">"dealer"</span>: <span class="o">{</span>
    <span class="s2">"partner_id"</span>: <span class="s2">"51101"</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>your_api_key</code> with your API key.</p>
</blockquote>

<p>You can create a new customer in the Roadster Express Strorefront for a specified dealer using a POST to the <code>/user</code> endpoint. The response will include the unique identifier of the user as well as a unique URL to the specified piece of inventory on the dealer&#39;s site which will automatically store the provided user as active in the session.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer</strong></td>
<td><strong>object</strong></td>
<td><strong>yes</strong></td>
<td><strong>Object including the user data</strong></td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s first name</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s last name</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s email address</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>no</td>
<td>The user&#39;s phone number (E.164 formatting is preferred)</td>
</tr>
<tr>
<td>partner_id</td>
<td>string</td>
<td>no</td>
<td>A unique identifier provided by the partner to be appended to the customer record for reporting purposes.</td>
</tr>
<tr>
<td><strong>dealer</strong></td>
<td><strong>object</strong></td>
<td><strong>no</strong></td>
<td><strong>Data to force user creation against a specific dealer. If included, one of the identifiers below must be used.</strong></td>
</tr>
<tr>
<td>partner_id</td>
<td>string</td>
<td>no</td>
<td>Your unique identifier for the dealership (must be registered with Roadster to impact dealer selection otherwise stored as data only)</td>
</tr>
<tr>
<td>dpid</td>
<td>string</td>
<td>no</td>
<td>Roadster&#39;s unique identifier for a dealership</td>
</tr>
<tr>
<td><strong>vehicle</strong></td>
<td><strong>object</strong></td>
<td><strong>no</strong></td>
<td>**Object including the user&#39;s vehicle preference which will also be the resulting landing page of the returned URL.</td>
</tr>
<tr>
<td>vin</td>
<td>string</td>
<td>no</td>
<td>The preferred VIN. Without this we will return search level results at a make or model level.</td>
</tr>
<tr>
<td>make</td>
<td>string</td>
<td>no</td>
<td>The preferred make, this is required if there is no VIN but model or submodel info is provided.</td>
</tr>
<tr>
<td>model</td>
<td>string</td>
<td>no</td>
<td>The preferred model, this is not required if a VIN or submodel is provided or make-level results are sufficient.</td>
</tr>
<tr>
<td>year</td>
<td>string</td>
<td>no</td>
<td>The preferred model year, not required if a VIN is provided or the preferred search set should be limited to new.</td>
</tr>
</tbody></table>
<h2 id='expected-response'>Expected response</h2>
<blockquote>
<p>Example success response</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">1</span> <span class="mi">200</span> <span class="no">OK</span>
<span class="p">{</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"ok"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">1650260</span><span class="p">,</span>
    <span class="s2">"redirect_url"</span><span class="p">:</span> <span class="s2">"http://brickellmazda.roadsterlocal.com:3000/express/JM1NDAM77K0306400?ucid=1650260"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>HTTP/1.1 200 OK
<span class="o">{</span>
  <span class="s2">"status"</span>: <span class="s2">"ok"</span>,
  <span class="s2">"customer"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: 1650260,
    <span class="s2">"redirect_url"</span>: <span class="s2">"http://brickellmazda.roadster.com/express/JM1NDAM77K0306400?ucid=1650260"</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>Example error response</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">1</span> <span class="mi">400</span> <span class="no">Bad</span> <span class="no">Request</span>
<span class="p">{</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
  <span class="s2">"error"</span><span class="p">:</span> <span class="s2">"Missing email"</span>
<span class="p">}</span>
</code></pre><pre class="highlight shell tab-shell"><code>HTTP/1.1 400 Bad Request
<span class="o">{</span>
  <span class="s2">"status"</span>: <span class="s2">"error"</span>,
  <span class="s2">"error"</span>: <span class="s2">"Missing email"</span>
<span class="o">}</span>
</code></pre>
<p>A request to the create user endpoint will create a customer and respond with a <code>redirect_url</code> that can be used to redirect the user to a landing page on the corresponding dealer site with account active in the session and pricing unlocked. In the case that the user exists, the response will still be <code>success</code> but the <code>duplicate</code> parameter will also be true.</p>

<table><thead>
<tr>
<th>Response field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>The HTTP response status</td>
</tr>
<tr>
<td>error</td>
<td>string</td>
<td>Error message (if status of error returned)</td>
</tr>
<tr>
<td><strong>customer</strong></td>
<td><strong>object</strong></td>
<td><strong>Object containing the customer data that was just created</strong></td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>The unque identifier of that customer on the Roadster platform</td>
</tr>
<tr>
<td>redirect_url</td>
<td>string</td>
<td>The URL of the landing page that corresponds to the grainularity of data provided in the request. When redirecting to this page will automatically log the user as the active account in the session and unlock any pricing (if applicable).</td>
</tr>
</tbody></table>
<h2 id='browser-based-customer-submission'>Browser-based customer submission</h2><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'base64'</span>

<span class="k">def</span> <span class="nf">aes256_cbc_encrypt</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
  <span class="n">key</span> <span class="o">=</span> <span class="no">Digest</span><span class="o">::</span><span class="no">SHA256</span><span class="p">.</span><span class="nf">digest</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">if</span><span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="nf">kind_of?</span><span class="p">(</span><span class="no">String</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="mi">32</span> <span class="o">!=</span> <span class="n">key</span><span class="p">.</span><span class="nf">bytesize</span><span class="p">)</span>
  <span class="n">aes</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Cipher</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'AES-256-CBC'</span><span class="p">)</span>
  <span class="n">aes</span><span class="p">.</span><span class="nf">encrypt</span>
  <span class="n">aes</span><span class="p">.</span><span class="nf">key</span> <span class="o">=</span> <span class="n">key</span>
  <span class="n">iv</span> <span class="o">=</span> <span class="n">aes</span><span class="p">.</span><span class="nf">random_iv</span>
  <span class="k">return</span> <span class="n">aes</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="n">aes</span><span class="p">.</span><span class="nf">final</span><span class="p">,</span> <span class="n">iv</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">generate_link</span><span class="p">(</span><span class="n">vin</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s2">"your_encryption_key"</span><span class="p">)</span>
  <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="ss">fname: </span><span class="s1">'Testing'</span><span class="p">,</span> <span class="ss">lname: </span><span class="s1">'Bot'</span><span class="p">,</span> <span class="ss">email: </span><span class="s1">'testing@roadster.com'</span><span class="p">,</span> <span class="ss">phone: </span><span class="s1">'800-505-1000'</span><span class="p">}</span>

  <span class="n">block</span><span class="p">,</span> <span class="n">iv</span> <span class="o">=</span> <span class="n">aes256_cbc_encrypt</span> <span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">mem_token</span> <span class="o">=</span> <span class="no">Base64</span><span class="p">.</span><span class="nf">encode64</span><span class="p">(</span><span class="n">iv</span> <span class="o">+</span> <span class="n">block</span><span class="p">)</span>
  <span class="n">escaped_token</span> <span class="o">=</span> <span class="no">CGI</span><span class="p">.</span><span class="nf">escape</span> <span class="n">mem_token</span>
  <span class="n">url</span> <span class="o">=</span> <span class="s2">"/express/"</span> <span class="o">+</span> <span class="n">vin</span> <span class="o">+</span> <span class="s2">"?mem="</span> <span class="o">+</span> <span class="n">escaped_token</span>
<span class="k">end</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># The query string should be URL encoded BEFORE encryption</span>

<span class="nb">echo</span> <span class="s2">"fname%3DTesting%26lname%3DBot%26email%3Dtesting%40roadster.com%26phone%3D800-505-1000"</span> | openssl aes-256-cbc -a -salt
enter aes-256-cbc encryption password: your_encryption_key
Verifying - enter aes-256-cbc encryption password: your_encryption_key

curl <span class="s2">"https://express-dealer-site/express/[vin]?mem="</span> + encryption_result
</code></pre>
<blockquote>
<p>The customer data should be URL encoded <em>before</em> encryption</p>
</blockquote>

<p>This browser-based URL request format allows partners to securely pass customer data into the Roadster platform using URL query parameters. The customer data is then used to create an account on the dealer&#39;s Express Storefront and bypass any price locks that may be enabled for that dealership. The request also results in lead submission consistent with the lead routing rules the dealership has setup for &quot;Unlock Inquiry&quot; lead types.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://express-dealer-site/express/[vin]?mem=[encrypted_parameters]</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>vin</td>
<td>yes</td>
<td>The vehicle identification number of the requested details landing page.</td>
</tr>
<tr>
<td>encrypted_parameters</td>
<td>yes</td>
<td>The customer&#39;s encrypted contact information (see detail below).</td>
</tr>
</tbody></table>

<aside class="notice">
Replace the <code>express-dealer-site</code> with the hostname for the dealership you are referring to.
</aside>

<p>The <code>mem</code> query parameter should contain the encrypted URL query string of the customer&#39;s contact information that you are referring to the dealership. This contact information can include any of the following key / value pairs:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fname</td>
<td>no</td>
<td>The first name of the customer.</td>
</tr>
<tr>
<td>lname</td>
<td>no</td>
<td>The last name of the customer.</td>
</tr>
<tr>
<td>email</td>
<td>yes</td>
<td>The email address of the customer (used as the unique identifier for each dealership).</td>
</tr>
<tr>
<td>phone</td>
<td>no</td>
<td>The phone number of the customer</td>
</tr>
<tr>
<td>custid</td>
<td>no</td>
<td>A unique identifier from the attribution source (only used for reporting purposes).</td>
</tr>
</tbody></table>

<aside class="notice">
These parameters should be placed in a standard URL query string and URL encoded _before_ encryption.
E.g. <code>fname%3DTesting%26lname%3DBot%26email%3Dtesting%40roadster.com%26phone%3D800-505-1000</code>
</aside>
<h1 id='errors'>Errors</h1>
<p>Roadster APIs use the following error statuses:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified dealer or resource could not be found.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
